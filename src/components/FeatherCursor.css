/* Global cursor hiding - applied when FeatherCursor is active */
/* Use maximum specificity to override all cursor styles, including inline styles */
html body.feather-cursor-active,
html body.feather-cursor-active *,
html body.feather-cursor-active *::before,
html body.feather-cursor-active *::after,
html body.feather-cursor-active button,
html body.feather-cursor-active a,
html body.feather-cursor-active [role="button"],
html body.feather-cursor-active [onclick],
html body.feather-cursor-active [draggable="true"],
html body.feather-cursor-active [draggable],
html body.feather-cursor-active .cursor-pointer,
html body.feather-cursor-active [class*="cursor"],
html body.feather-cursor-active [style*="cursor"] {
  cursor: none !important;
}

/* Additional rule for elements with inline cursor styles - needs even higher specificity */
html body.feather-cursor-active [style*="cursor: pointer"],
html body.feather-cursor-active [style*="cursor:pointer"],
html body.feather-cursor-active [style*="cursor: grab"],
html body.feather-cursor-active [style*="cursor:grab"],
html body.feather-cursor-active [style*="cursor: grabbing"],
html body.feather-cursor-active [style*="cursor:grabbing"],
html body.feather-cursor-active [style*="cursor: move"],
html body.feather-cursor-active [style*="cursor:move"] {
  cursor: none !important;
}

/* Feather Cursor (Desktop) - Use same approach as particles which work in Safari */
.feather-cursor {
  position: fixed;
  width: 32px;
  height: 32px;
  pointer-events: none;
  z-index: 99999;
  transform: translate(-50%, -50%) translateZ(0); /* Rotation removed for testing */
  opacity: 0;
  transition: opacity 0.2s ease, transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* Smooth scale transitions */
  will-change: transform, opacity; /* Optimize for Safari */
  -webkit-transform: translate(-50%, -50%) translateZ(0); /* Safari-specific - must match transform */
  /* Use background-image exactly like particles (which work in Safari) */
  background-image: url('/feather.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

/* Hover state - scale up when over clickable elements */
.feather-cursor-hover {
  transform: translate(-50%, -50%) scale(1.3) translateZ(0) !important;
  -webkit-transform: translate(-50%, -50%) scale(1.3) translateZ(0) !important;
}

/* Click state - scale down for visual feedback */
.feather-cursor-click {
  transform: translate(-50%, -50%) scale(0.8) translateZ(0) !important;
  -webkit-transform: translate(-50%, -50%) scale(0.8) translateZ(0) !important;
  transition: transform 0.1s cubic-bezier(0.34, 1.56, 0.64, 1) !important; /* Quick bounce on click */
}

/* Feather particles */
.feather-particle {
  position: fixed;
  pointer-events: none;
  z-index: 999999;
  background-image: url('/feather.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  animation: featherFloat var(--animation-duration, 1s) cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

/* Combined animation - smooth path with wobbling rotation (30 keyframes for ultra-smooth motion) */
@keyframes featherFloat {
  0% {
    transform: translate(-50%, -50%) translate(0, 0) rotate(var(--initial-rotation, 0deg));
    opacity: var(--initial-opacity, 1);
  }
  3.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.0333), calc(var(--fall-distance, 0px) * 0.0333)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.1)));
    opacity: calc(var(--initial-opacity, 1) * 0.997);
  }
  6.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.0667), calc(var(--fall-distance, 0px) * 0.0667)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.2)));
    opacity: calc(var(--initial-opacity, 1) * 0.993);
  }
  10% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.1), calc(var(--fall-distance, 0px) * 0.1)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.3)));
    opacity: calc(var(--initial-opacity, 1) * 0.99);
  }
  13.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.1333), calc(var(--fall-distance, 0px) * 0.1333)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.4)));
    opacity: calc(var(--initial-opacity, 1) * 0.987);
  }
  16.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.1667), calc(var(--fall-distance, 0px) * 0.1667)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.5)));
    opacity: calc(var(--initial-opacity, 1) * 0.983);
  }
  20% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.2), calc(var(--fall-distance, 0px) * 0.2)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.6)));
    opacity: calc(var(--initial-opacity, 1) * 0.98);
  }
  23.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.2333), calc(var(--fall-distance, 0px) * 0.2333)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.7)));
    opacity: calc(var(--initial-opacity, 1) * 0.977);
  }
  26.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.2667), calc(var(--fall-distance, 0px) * 0.2667)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.8)));
    opacity: calc(var(--initial-opacity, 1) * 0.973);
  }
  30% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.3), calc(var(--fall-distance, 0px) * 0.3)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.9)));
    opacity: calc(var(--initial-opacity, 1) * 0.97);
  }
  33.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.3333), calc(var(--fall-distance, 0px) * 0.3333)) rotate(calc(var(--initial-rotation, 0deg) - var(--max-rotation, 30deg)));
    opacity: calc(var(--initial-opacity, 1) * 0.967);
  }
  36.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.3667), calc(var(--fall-distance, 0px) * 0.3667)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.8)));
    opacity: calc(var(--initial-opacity, 1) * 0.963);
  }
  40% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.4), calc(var(--fall-distance, 0px) * 0.4)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.5)));
    opacity: calc(var(--initial-opacity, 1) * 0.96);
  }
  43.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.4333), calc(var(--fall-distance, 0px) * 0.4333)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.2)));
    opacity: calc(var(--initial-opacity, 1) * 0.957);
  }
  46.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.4667), calc(var(--fall-distance, 0px) * 0.4667)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.1)));
    opacity: calc(var(--initial-opacity, 1) * 0.953);
  }
  50% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.5), calc(var(--fall-distance, 0px) * 0.5)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.4)));
    opacity: calc(var(--initial-opacity, 1) * 0.95);
  }
  53.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.5333), calc(var(--fall-distance, 0px) * 0.5333)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.7)));
    opacity: calc(var(--initial-opacity, 1) * 0.947);
  }
  56.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.5667), calc(var(--fall-distance, 0px) * 0.5667)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.9)));
    opacity: calc(var(--initial-opacity, 1) * 0.943);
  }
  60% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.6), calc(var(--fall-distance, 0px) * 0.6)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.8)));
    opacity: calc(var(--initial-opacity, 1) * 0.94);
  }
  63.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.6333), calc(var(--fall-distance, 0px) * 0.6333)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.6)));
    opacity: calc(var(--initial-opacity, 1) * 0.937);
  }
  66.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.6667), calc(var(--fall-distance, 0px) * 0.6667)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.4)));
    opacity: calc(var(--initial-opacity, 1) * 0.933);
  }
  70% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.7), calc(var(--fall-distance, 0px) * 0.7)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.2)));
    opacity: calc(var(--initial-opacity, 1) * 0.93);
  }
  73.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.7333), calc(var(--fall-distance, 0px) * 0.7333)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.1)));
    opacity: calc(var(--initial-opacity, 1) * 0.927);
  }
  76.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.7667), calc(var(--fall-distance, 0px) * 0.7667)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.3)));
    opacity: calc(var(--initial-opacity, 1) * 0.923);
  }
  80% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.8), calc(var(--fall-distance, 0px) * 0.8)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.5)));
    opacity: calc(var(--initial-opacity, 1) * 0.92);
  }
  83.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.8333), calc(var(--fall-distance, 0px) * 0.8333)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.3)));
    opacity: calc(var(--initial-opacity, 1) * 0.917);
  }
  86.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.8667), calc(var(--fall-distance, 0px) * 0.8667)) rotate(calc(var(--initial-rotation, 0deg) - calc(var(--max-rotation, 30deg) * 0.1)));
    opacity: calc(var(--initial-opacity, 1) * 0.913);
  }
  90% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.9), calc(var(--fall-distance, 0px) * 0.9)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.1)));
    opacity: calc(var(--initial-opacity, 1) * 0.91);
  }
  93.33% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.9333), calc(var(--fall-distance, 0px) * 0.9333)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.2)));
    opacity: calc(var(--initial-opacity, 1) * 0.907);
  }
  96.67% {
    transform: translate(-50%, -50%) translate(calc(var(--horizontal-end, 0px) * 0.9667), calc(var(--fall-distance, 0px) * 0.9667)) rotate(calc(var(--initial-rotation, 0deg) + calc(var(--max-rotation, 30deg) * 0.1)));
    opacity: calc(var(--initial-opacity, 1) * 0.903);
  }
  100% {
    transform: translate(-50%, -50%) translate(var(--horizontal-end, 0px), var(--fall-distance, 0px)) rotate(calc(var(--initial-rotation, 0deg) + 360deg));
    opacity: 0;
  }
}

/* Mobile particles - use same image, opacity controlled by inline style */
/* .feather-particle-mobile inherits all styles from .feather-particle */

/* Ensure particles don't interfere with interactions */
.feather-cursor,
.feather-particle {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
